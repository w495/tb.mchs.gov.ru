

### ЧТО ЭТО?
    
    Папка с шаблонами xsl
    Преобразование проводится с помощью xsllib + xmllib2.
    Не всегда воспринимает все конструкции, которые переваривает
    шаблонная система phenopy (движок tvzavr).
    Вообщем случае, шаблонная система тут более строгая.
    
    Самой большой досадой является, то, что <xsl:output indent="yes" />
    включить не возможно. Вывод происходит в одну строку.
    
### СТРУКТУРА ПАПОК

    При создании шаблонов, я старался придерживаться следующей структуры,
    возможно есть отступления от нее.
    
    ===========================================================================
    
    [*]      --- папки;
    {*}      --- папки, яаляющиеся общими (sym link)
                 для всех типов отображения;
    *.xsl    --- файлы шаблонов.
    
    --------------------------------------------------------------------------
    
        [<тип отображения>]:
            [<контроллер 1>]:
                [includes]:
                    <вспомогательный шаблон a>.xsl
                    <вспомогательный шаблон b>.xsl
                <действие 1 1>.xsl
                <действие 1 2>.xsl
                <действие ...>.xsl
                <действие 1 n>.xsl
                
            [<контроллер 2>]:
                [includes]:
                    <вспомогательный шаблон x>.xsl
                    <вспомогательный шаблон y>.xsl
                <действие 2 1>.xsl
                <действие 2 2>.xsl
                <действие ...>.xsl
                <действие 2 n>.xsl
                
            [<контроллер k>]:
                <действие k 1>
                <действие k 2>.xsl
                <действие ...>.xsl
                <действие k n>.xsl
                
            ["shared"]:
                ["includes"]:
                    /*
                        В этой папке лежат статичные шаблоны,
                        которые используются, в различных видах основ.
                        Это могут быть футтеры, хеддеры, какие,
                        либо обособлленные элементы.
                    */
                ["master"]:
                    [<основа 1>]:
                        <основа конретного типа страницы 1>.xsl
                        <основа конретного типа страницы 2>.xsl
                        <основа конретного типа страницы n>.xsl
                        base.xsl
                    [<основа 2>]:
                        <основа конретного типа страницы 1>.xsl
                        <основа конретного типа страницы 2>.xsl
                        <основа конретного типа страницы n>.xsl
                        base.xsl
                    [<основа ...>]:
                        base.xsl
                    [<основа n>]:
                        base.xsl
                    root.sxl
                {"utils"}:
                    /*
                        В этой папке лежат динамические шаблоны,
                        которые НЕ имеют никакой графической обвязки.
                        Это могут быть различные утилиты конвертации форматов,
                        тектовые преобразователи и пр.
                    */
                {"widgets"}:
                    /*
                        В этой папке лежат динамические шаблоны,
                        которые могут иметь графическую обвязку.
                        Это наиболее частые динамические элементы страницы.
                    */
    
    --------------------------------------------------------------------------
    
    Ограничения (на данный момент):
        <тип отображения>:= "normal"|"mobile"|"wap"|"rss"
    
    ===========================================================================
    
    При обращении к адресу:
        http://<сервер>/<Тип отображения>/<Контроллер>/<Действие>/
            Движок сайта вызывает <действие> <контроллера>
            при этом, если оно предполагает возврат страницы, используется
            шаблон из [<тип отображения>]/[<контроллер>]/<действие>.xsl
            ЗАМЕЧАНИЕ:
                Именованеи типа отображения, контроллеров и действия,
                в URL --- с заглавной буквы.
            Если <Тип отображения>, не принадлежит списку
            ("mobile","wap","rss"), то считается, что мы
            используем отображение ["normal"], и далее проверяется путь
                http://<сервер>/<Контроллер>/<Действие>/
            Вариант пути
                http://<сервер>/Normal/<Контроллер>/<Действие>/
             НЕ ИСПОЛЬЗУЕТСЯ
        http://<сервер>/<Контроллер>/<Действие>/
            Движок сайта вызывает <действие> <контроллера>
            для типа отображения "normal"
            при этом, если оно предполагает возврат страницы, используется
            шаблон из ["normal"]/[<контроллер>]/<действие>.xsl
        http://<сервер>/<Контроллер>/
            Идет вызов http://<сервер>/<Контроллер>/Index/
        http://<сервер>/
            Идет вызов http://<сервер>/Home/Index/
    
### ИМЕНА ШАБЛОНОВ
    
    Я старался следовать принципу 1 файл --- 1 шаблон.
    Имя файла должно совпадать с именем содержавшимся в нем шаблоном.
    Если в файле содержится несколько шаблонов, то тот, который иедет
    первым считается главным, остальные --- вспомогательные.
    Вспомогательные шаблоны, желательно не использовать вне текущего файла.
    Описанное правило НЕ ОТНОСИТСЯ к файлам действий и ключевым файлам основ
    (root.xsl, base.xsl и пр).
    
    Файл начинающийся с символа '~' --- является устаревшим
    и на текущий момент не используется.
    Чаще всего это шаблоны из inckude, которые были заменены виджетами
    из папки widgets.
    
### ПАРАМЕТРЫ ШАБЛОНОВ
    
    Если это возмножно, шаблоны лучше делать параметризованными.
    Т.е. использовать xsl:param.
    Возможно, это даст некоторое замедление подстановки,
    но позволит достич гибкости, при комбинировании шаблонов.
    Мы старались все параметры и "переменные" называть с большой буквы.
    
### ИСПОЛЬЗОВАНИЕ IMPORT И INCLUDE
    
    Если шаблон A основывается на шаблоне B,
        то внутри шаблона A я использовал import
        
    Если в шаблоне A шаблон B просто используется, например как виджет,
        то я старался использовать include. Противное допущено по недосмотру
        и, впринципе, является ошибкой.
